from discord.ext import commands
import discord
import googletrans
# import translator
from googletrans import Translator


class Others(commands.Cog, name='other'):

    def __init__(self, bot):
        self.bot = bot

    def cog_load(self):
        print("Other was loaded")

    def cog_unload(self):
        print(f'Other was unloaded')

    @commands.command()
    async def tran(self, ctx, lang, *, args):
        try:
            t = Translator()
            a = t.translate(args, dest=lang)
            if(args == a.text):
                msgID = int(args)
                msg = await ctx.fetch_message(msgID)
                a = t.translate(msg.content, dest=lang)
                await ctx.reply(a.text)
            else:
                await ctx.reply(a.text)
        except:
            await ctx.reply("Can't translate this!")

    @commands.command(name="ping")
    @commands.cooldown(1, 5, commands.BucketType.user)
    async def ping(self, ctx):
        await ctx.send(f'Pong! In {round(self.bot.latency * 1000)} ms')


def setup(bot):
    bot.add_cog(Others(bot))
    print(f'Other was loaded!')
